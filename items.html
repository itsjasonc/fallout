<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Integer & Weapon Generator</title>
<style>
/* Ensure padding doesn't break widths */
* { box-sizing: border-box; }

body {
  font-family: system-ui, sans-serif;
  background: #1e1e2f;
  color: #eee;
  margin: 0;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
}
h1,h2 { text-align:center; margin:.5rem 0; }

.container {
  background: #2a2a40;
  padding: 1rem;
  border-radius: 1rem;
  width: 100%;
  max-width: 400px;
  box-sizing: border-box;
  margin-bottom: 1rem;
}

/* form controls */
input[type=number], input[type=range], select, button {
  width:100%;
  padding:.5rem;
  border-radius:.5rem;
  border:none;
  text-align:center;
  margin-bottom:.6rem;
  font-size:1rem;
  box-sizing: border-box;
}
button { background:#4e8cff; color:#fff; font-weight:bold; }
button:hover { background:#2a6ce2; }

.bars{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  height:120px; /* prevents overlap with button */
  margin-top:1rem; /* gap under the button */
}
.bar-container{ display:flex; flex-direction:column; align-items:center; width:22%; }
.bar{
  width:100%;
  border-radius:.3rem;
  min-height:5px;
  transition:height .3s ease;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  color:#fff;
  font-size:1rem;
  font-weight:bold;
  text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;
  overflow:hidden;
}
#bar1{ background:linear-gradient(180deg,#ff5e5e,#d43e3e); } /* Physical - red */
#bar2{ background:linear-gradient(180deg,#5ec8ff,#2e9ed4); } /* Energy - blue */
#bar3{ background:linear-gradient(180deg,#ffbd5e,#e68b2e); } /* Explosive - orange */
#bar4{ background:linear-gradient(180deg,#5eff7d,#2ed451); } /* Rad - green */

.label{ margin-top:.3rem; font-size:.8rem; color:#ccc; text-align:center; }

.weapon-output{
  background:#1e1e2f;
  border-radius:.5rem;
  padding:.3rem;
  text-align:center;
  margin-top:.5rem;
  line-height:1.3;
  font-size:.95rem;
}
.weapon-output span{ color:#4e8cff; font-weight:700; }
.small { font-size:0.85rem; color:#bbb; }

#ComplicationOutput {
  background:#1e1e2f;
  border-radius:.5rem;
  padding:.6rem;
  text-align:center;
  margin-top:.5rem;
  line-height:1.3;
  font-size:.95rem;
}
	#ammoOutput {
  background:#1e1e2f;
  border-radius:.5rem;
  padding:.6rem;
  text-align:center;
  margin-top:.5rem;
  line-height:1.3;
  font-size:.95rem;
}

#RationWaterOutput {
  background:#1e1e2f;
  border-radius:.5rem;
  padding:.6rem;
  text-align:center;
  margin-top:.5rem;
  line-height:1.3;
  font-size:.95rem;
}
	#medOutput {
  background:#1e1e2f;
  border-radius:.5rem;
  padding:.6rem;
  text-align:center;
  margin-top:.5rem;
  line-height:1.3;
  font-size:.95rem;
}

.filter-row {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  width: 100%;
}

.filter-box {
  flex: 1;
}

.filter-box label {
  display: block;
  font-weight: bold;
  margin-bottom: 4px;
}

.filter-box select {
  width: 100%;
  padding: 4px;
  font-size: 14px;
  border-radius: 6px;
  border: 1px solid #555;
  background: #222;
  color: #fff;
}


</style>
</head>
<body>


<div class="container">
<h2>üé≤ Armor Distributor</h2>
  <input type="number" id="inputValue" min="0" value="10" placeholder="Enter integer">

  <!-- Hidden evenness slider (kept so JS can reference it; value remains 0.5 by default) -->
  <input type="range" id="evennessSlider" min="0" max="1" step="0.01" value="0.5" style="display:none;">

  <button onclick="distribute()">Distribute</button>

  <div class="bars">
    <div class="bar-container">
      <div class="bar" id="bar1"><span></span></div>
      <div class="label">Physical</div>
    </div>
    <div class="bar-container">
      <div class="bar" id="bar2"><span></span></div>
      <div class="label">Energy</div>
    </div>
    <div class="bar-container">
      <div class="bar" id="bar3"><span></span></div>
      <div class="label">Explosive</div>
    </div>
    <div class="bar-container">
      <div class="bar" id="bar4"><span></span></div>
      <div class="label">Rad</div>
    </div>
  </div>
</div>
<div class="container">
<h2>üéöÔ∏è Party Level</h2>
<input type="number" id="partyLevel" min="1" value="5" placeholder="Party Level">
<h2>üõ°Ô∏è Armor Generator</h2>
<div id="armorTitle"  style="font-size: 18px; text-align: center; margin-bottom: 10px;">No armor generated yet</div>
<button id="generateArmorBtn" onclick="generateArmor()">Generate Armor</button>



<h2>‚öîÔ∏è Weapon Generator</h2>

  <div class="filter-row">
	  <div class="filter-box">
	  <select id="damageFilter">
		<option value="all">All Damage Types</option>
		<option value="P">Physical (P)</option>
		<option value="E">Energy (E)</option>
		<option value="X">Explosive (X)</option>
		<option value="R">Rad (R)</option>
	  </select>
	  </div>
	   <div class="filter-box">
	  <select id="typeFilter">
		<option value="all">All Weapon Types</option>
		<option value="melee">Melee</option>
		<option value="range">Ranged</option>
	  </select>
	  
		</div>

	</div>
<button onclick="generateWeapon()">Generate Weapon</button>
  <div id="weaponResult" class="weapon-output small"></div>
</div> 

<div class="container">  
  <h2>‚ö†Ô∏è Complications </h2>
  <button onclick="generateComplications()">Generate Complications</button>
  <div id="ComplicationOutput" class="output"></div>
</div>
	
<div class="container">
	<div class="generator-box">
  	<h2>üí• Ammo Generator</h2>
 	 <button onclick="generateAmmo()">Generate Ammo</button>
  	<div id="ammoOutput" class="output"></div>
</div></div>  


	
<div class="container">		
<h2>üçû Scrap/Rations/Water </h2>
<button onclick="generateRations()">Generate Items</button>
<div id="RationWaterOutput" style="margin-top: 10px;"></div>
</div>
	<div class="container">
  <h2>üíâ Meds & Chems </h2>
  <button onclick="generateMedsAndChems()">Generate Meds & Chems</button>
  <div id="medOutput" style="margin-top: 10px;"></div>
</div>

<script>
/* ---------- Integer Distributor ---------- */
function rollDie(sides){ return Math.floor(Math.random()*sides)+1; }

/* Keep same variable name the rest of the code expects */
const slider = document.getElementById('evennessSlider');

function generateDistribution(total) {
  const evenness = parseFloat(slider.value) || 0;
  const base = total / 4;
  let parts = [];

  if (evenness === 0) {
    parts = [base, base, base, base];
  } else {
    let devs = Array.from({ length: 4 }, () => (Math.random() * 2 - 1) * evenness);
    const sumDev = devs.reduce((a, b) => a + b, 0);
    devs = devs.map(d => d - sumDev / 4);

    parts = devs.map(d => base + base * d);

    const factor = total / parts.reduce((a, b) => a + b, 0);
    parts = parts.map(p => Math.round(p * factor));

    let diff = total - parts.reduce((a, b) => a + b, 0);
    for (let i = 0; i < Math.abs(diff); i++) {
      parts[i % 4] += diff > 0 ? 1 : -1;
    }
  }

  return parts;
}
	function distribute() {
  const total = parseInt(document.getElementById('inputValue').value) || 0;
  const parts = generateDistribution(total);

  const maxVal = Math.max(...parts, 1);
  const containerH = 120;

  parts.forEach((p, i) => {
    const bar = document.getElementById('bar' + (i + 1));
    bar.style.height = (p / maxVal * containerH) + 'px';
    bar.querySelector('span').textContent = p;
  });
}
	
	
/* initialize on load */
window.addEventListener('load', distribute);

// ===== ARMOR GENERATOR =====

	const armorTable = [
  { roll: 2, text: "Junk armor: +9 def, 60c" },
  { roll: 3, text: "Raider armor: +10 def, 70c" },
  { roll: 4, text: "Leather armor: +11 def, 80c" },
  { roll: 5, text: "Chain armor: +12 def, 90c" },
  { roll: 6, text: "Metal armor: +13 def, 100c" },
  { roll: 7, text: "Synth armor: +14 def, 110c" },
  { roll: 8, text: "Mutant armor: +16 def, 120c" },
  { roll: 9, text: "Rugged armor: +18 def, 130c" },
  { roll: 10, text: "Combat armor: +20 def, 140c" },
  { roll: 11, text: "Infantry armor: +22 def, 150c" },
  { roll: 12, text: "Assault armor: +24 def, 160c" },
  { roll: 13, text: "Ranger armor: +26 def, 170c" },
  { roll: 14, text: "Salvaged power armor: +28 def, 180c" },
  { roll: 15, text: "Power armor: +30 def, +190c" },
  { roll: 16, text: "Advanced power armor: +32 def, 200c" }
];

// helper for single die roll
function rollDie(sides){ return Math.floor(Math.random() * sides) + 1; }

function generateArmor() {
  const level = parseInt(document.getElementById("partyLevel").value) || 0;
  const roll = Math.min(16, rollDie(6) + level);

  const armorEntry = armorTable.find(a => a.roll === roll);
  if (!armorEntry) return;

  let armorText = armorEntry.text;

  // Extract DEF value from text (number after "+X def")
  const defMatch = armorText.match(/\+(\d+)\s*def/i);
  if (!defMatch) {
    console.error("No DEF value found in armor text:", armorText);
    return;
  }

  let defValue = parseInt(defMatch[1], 10);

  // Handle Heavy logic
  let isHeavy = /heavy/i.test(armorText);
  if (!isHeavy && rollDie(6) <= 2) {
    isHeavy = true;
    defValue += 4;	
	armorText = armorText.replace(/\+\d+\s*def/i, `+${defValue} def`);
  }

  // Distribute DEF using existing logic
   const distribution = generateDistribution(defValue);
	if (typeof updateBars === "function") {
    updateBars(values);
  }

  // Output armor text + distribution
  const distText = `(${distribution.join(", ")})`;
	
	// Split armor name from the rest of the text

const nameMatch = armorText.match(/^([^:]+):\s*(.*)$/);

let armorName = armorText;
let armorStats = "";

if (nameMatch) {
  armorName = nameMatch[1];
  armorStats = nameMatch[2];
}
if (isHeavy) {
  armorName = `<span style="color:red; font-weight:bold;">(H)</span> ${armorName}`;
}
	
// Output with name on first line, stats on second
document.getElementById("armorTitle").innerHTML = `
  <b>${armorName}</b><br>
  ${armorStats} ${distText}
`;
}

/* ---------- Weapon data & generator (unchanged logic) ---------- */
/* Note: ammo field uses "-" for no-ammo entries so indexes stay consistent */
const weapons = {
  E1:[ [6,"Pipe Pistol","5 P","small rounds","mid","AGI","30c"],
       [8,"Revolver","6 P","small rounds","mid","AGI","40c"],
       [10,"Combat Pistol","7 P","small rounds","mid","AGI","50c"],
       [12,"Magnum","8 P","small rounds","mid","AGI","60c"],
       [14,"Big Iron","9 P","small rounds","mid","AGI","70c"],
       [99,"Purifier","10 P","small rounds","mid","AGI","80c"] ],
  E2:[ [6,"Laser Pistol","6 E","E-cell","mid","INT","40c"],
       [8,"Plasma Pistol","7 E","E-cell","mid","INT","50c"],
       [10,"Sonic Pistol","8 E","E-cell","mid","INT","60c"],
       [12,"Tesla Pistol","9 E","E-cell","mid","INT","70c"],
       [14,"Gauss Pistol","10 E","E-cell","mid","INT","80c"],
       [99,"Valanyr","11 E","E-cell","mid","INT","90c"] ],
  E3:[ [6,"Pipe Rifle","7 P","large rounds","long","AGI","50c"],
       [8,"Service Rifle","8 P","large rounds","long","AGI","70c"],
       [10,"Hunting Rifle","9 P","large rounds","long","AGI","90c"],
       [12,"Combat Rifle","10 P","large rounds","long","AGI","110c"],
       [14,"Assault Rifle","11 P","large rounds","long","AGI","130c"],
       [99,"Thoridal","12 P","large rounds","long","AGI","150c"] ],
  E4:[ [6,"Laser Rifle","8 E","MF-cell","long","INT","60c"],
       [8,"Plasma Rifle","9 E","MF-cell","long","INT","80c"],
       [10,"Sonic Rifle","10 E","MF-cell","long","INT","100c"],
       [12,"Tesla Rifle","11 E","MF-cell","long","INT","120c"],
       [14,"Gauss Rifle","12 E","MF-cell","long","INT","140c"],
       [99,"Atiesh","13 E","MF-cell","long","INT","160c"] ],
  E5:[ [6,"Sawed-Off SG","3x3 P","small","short","AGI","50c"],
       [8,"Hunting SG","3x4 P","small","short","AGI","60c"],
       [10,"Caravan SG","3x5 P","small","short","AGI","70c"],
       [12,"Combat SG","3x6 P","small","short","AGI","80c"],
       [14,"Riot SG","3x7 P","small","short","AGI","90c"],
       [99,"Gorehowl","3x8 P","small","short","AGI","100c"] ],
  E6:[ [6,"Laser Shotgun","3x4 E","E-cell","short","INT","60c"],
       [8,"Plasma Shotgun","3x5 E","E-cell","short","INT","70c"],
       [10,"Gauss Shotgun","3x6 E","E-cell","short","INT","80c"],
       [12,"Gatling Laser","3x7 E","E-cell","short","INT","90c"],
       [14,"Tesla Cannon","3x8 E","E-cell","short","INT","100c"],
       [99,"Doomhammer","3x9 E","E-cell","short","INT","110c"] ],
  O1:[ [6,"Hand Mortar","10 X splash X","fuel","long","AGI","80c"],
       [8,"Nade Launcher","11 X splash","fuel","long","AGI","110c"],
       [10,"Nade Cannon","12 X splash","fuel","long","AGI","140c"],
       [12,"Missile Launcher","13 X splash","fuel","long","AGI","170c"],
       [14,"Fat Man","14 X splash","fuel","long","AGI","200c"],
       [99,"Ashbringer","15 X splash","fuel","long","AGI","230c"] ],
  O2:[ [6,"Flamer","9 X splash+burn","fuel","mid","AGI","70c"],
       [8,"Napalmer","10 X splash+burn","fuel","mid","AGI","100c"],
       [10,"Incinerator","11 X splash+burn","fuel","mid","AGI","130c"],
       [12,"Liquifier","12 X splash+burn","fuel","mid","AGI","160c"],
       [14,"Hellfire Inc","13 X splash+burn","fuel","mid","AGI","190c"],
       [99,"Sulfuras","14 X splash+burn","fuel","short","AGI","220c"] ],
  O3:[ [6,"Weak Melee","6 P","-","melee","STR","30c"],
       [8,"Medium Melee","7 P","-","melee","STR","50c"],
       [10,"Strong Melee","8 P","-","melee","STR","70c"],
       [12,"Powerful Melee","9 P","-","melee","STR","90c"],
       [14,"Ultimate Melee","10 P","-","melee","STR","110c"],
       [99,"Shadowmourne","11 P","-","melee","STR","130c"] ],
  O4:[ [6,"Brass Knuckles","2x4 P","-","melee","END","30c"],
       [8,"Bladed Gauntlet","2x5 P","-","melee","END","50c"],
       [10,"Yao Guai Gauntlet","2x6 P","-","melee","END","70c"],
       [12,"Power Fist","2x7 P","-","melee","END","90c"],
       [14,"Deathclaw Gauntlet","2x8 P","-","melee","END","110c"],
       [99,"Godhand","2x9 P","-","melee","END","130c"] ],
  O5:[ [6,"Shock Baton","2x4 E","-","melee","STR","50c"],
       [8,"Welding Torch","2x5 X","-","melee","STR","70c"],
       [10,"Tesla Coil","2x6 E","-","melee","STR","90c"],
       [12,"Thermic Lance","2x7 X","-","melee","STR","110c"],
       [14,"Shishkebab","2x8 E","-","melee","STR","130c"],
       [99,"Thunderfury","2x9 X","-","melee","STR","150c"] ],
  O6:[ [6,"Shock Glove","6 E","-","melee","END","50c"],
       [8,"Whalloper","7 X","-","melee","END","70c"],
       [10,"Plasma Glove","8 E","-","melee","END","90c"],
       [12,"Kinetic Fist","9 X","-","melee","END","110c"],
       [14,"Saturnite Fist","10 E","-","melee","END","130c"],
       [99,"Infinity Gauntlet","11 X","-","melee","END","150c"] ]
};

/* Weapon generator with filters */
function generateWeapon(){
  const level = parseInt(document.getElementById('partyLevel').value) || 1;
  const dmgFilter = document.getElementById('damageFilter').value;
  const typeFilter = document.getElementById('typeFilter').value;
  const out = document.getElementById('weaponResult');

  let attempt=0, chosen=null, category="", tierRoll=0;
  while(attempt<50){
    attempt++;
    const d1 = rollDie(6), d2 = rollDie(6);
    category = (d1 % 2 === 0 ? 'E' : 'O') + d2;
    tierRoll = rollDie(6) + level;
    const table = weapons[category];
    if(!table) continue;
    const weapon = table.find(e=>tierRoll<=e[0]) || table[table.length-1];

    // determine damage letter: first letter from damage string that matches P, E, X, R
    const dmgMatch = (weapon[2] || "").match(/[PEXR]/);
    const dmgType = dmgMatch ? dmgMatch[0] : "P";

    // weapon type: treat "melee" string as melee, everything else as range
    const wepType = (weapon[4] === "melee") ? "melee" : "range";

    if((dmgFilter==="all" || dmgFilter===dmgType) &&
       (typeFilter==="all" || typeFilter===wepType)){
      chosen = weapon;
      break;
    }
  }
  // üéØ Heavy mechanic (1/3 chance)
  let isHeavy = Math.random() < 1 / 3; // 1/3 chance
   
  if(!chosen){
    out.innerHTML = `<span>No weapon matches your filters.</span>`;
    return;
  }

  out.innerHTML = `<span Style="font-size: 18px;">${isHeavy ? "<span style='color:red; font-weight:bold;'>(H)</span> " : ""}${chosen[1]}</span>
                   <div Style="font-size: 18px;">Damage: ${chosen[2]}&nbsp;&nbsp;&nbsp;&nbsp;Ammo: ${chosen[3]}</div>
                   <div Style="font-size: 18px;">Range: ${chosen[4]}&nbsp;&nbsp;&nbsp;&nbsp;Stat: ${chosen[5]}&nbsp;&nbsp;&nbsp;&nbsp;Value:${chosen[6]}</div>`;
}
// ===== COMPLICATION GENERATOR =====
const complications = [
  ["+1/2 Thirst","END","Sweating from hot area"],
  ["+1/2 Hunger","CHA","Puking from terrible smell"],
  ["+1/2 Thirst","INT","Diarrhea from unidentified environmental toxins"],
  ["+1/2 Hunger","STR","Burning calories from prolongued heavy lifting"],
  ["+1/2 Thirst","AGI","Stuck in an overly dehumidified area"],
  ["+1/2 Hunger","END","Burning calories for prolongued cardio"],
  ["Lose 5/10 HP","CHA","Witnesses a gruesomely disturbing scene"],
  ["Lose 5/10 HP","INT","Chemicals cause hallucination"],
  ["Lose 5/10 HP","CHA","An explosion rattles the player"],
  ["Lose 5/10 HP","AGI","Fired on by automated defenses"],
  ["Lose 5/10 HP","INT","Get lost in a confined space"],
  ["Lose 5/10 HP","CHA","Hears sounds of nearby deadly animals"],
  ["+1/2 Fatigue","STR","Overexertion from lift/sprint/jump"],
  ["+1/2 Fatigue","AGI","Running from defenses"],
  ["+1/2 Fatigue","INT","Getting lost in confusing area"],
  ["+1/2 Fatigue","END","Exposure to extreme cold"],
  ["+1/2 Fatigue","END","Low oxygen area"],
  ["+1/2 Fatigue","STR","Exhaustion from clearing obstacles"],
  ["+1/2 Rads","STR","Scavenge through heavy toxic waste barrel dump"],
  ["+1/2 Rads","END","Treks through irradiated water"],
  ["+1/2 Rads","AGI","Long winding paths full of radiation"],
  ["+1/2 Rads","CHA","Irradiated shelters full of dead families"],
  ["+1/2 Rads","END","Broken technology leaking radiation"],
  ["+1/2 Rads","INT","Disable safety system for radioactive source"],
  ["+1/2 Injury","INT","Able to hack and disable a security turret"],
  ["+1/2 Injury","AGI","Ignites an explosive causing explosion"],
  ["+1/2 Injury","STR","Heavy objects fall on you"],
  ["+1/2 Injury","STR","A muscle is strained moving something heavy"],
  ["+1/2 Injury","CHA","Attacked by roaming security robots"],
  ["+1/2 Injury","AGI","Avoid gunfire from defenses"]
];

function generateComplications() {
  const c1 = complications[Math.floor(Math.random() * complications.length)];
  
  document.getElementById("ComplicationOutput").innerHTML =
    ` ${c1[0]} | Save: ${c1[1]}<br><i>${c1[2]}</i>`;
}

// ===== RATION GENERATOR =====
function generateRations() {
  const rationTypes = ["Armor/Clean", "Gun/Dirty", "Tech/Irradiated"];
  const rolls = rollDie(6) + rollDie(6);

  const counts = {
    "Armor/Clean": 0,
    "Gun/Dirty": 0,
    "Tech/Irradiated": 0
  };

  for (let i = 0; i < rolls; i++) {
    const type = rationTypes[Math.floor(Math.random() * rationTypes.length)];
    counts[type]++;
  }

  let output = `<b>Total Items:</b> ${rolls}<br>`;
  for (const type in counts) {
    if (counts[type] > 0) {
      output += `${type}: ${counts[type]}<br>`;
    }
  }

  document.getElementById("RationWaterOutput").innerHTML = output;
}
// ===== MED + CHEM GENERATOR =====
function generateMedsAndChems() {
  const medTable = [
    { name: "Bandage", effect: "-1 Injury, +10% HP" },
    { name: "Rad-X", effect: "-1 Rads, +10% HP" },
    { name: "Adrenaline", effect: "-1 Fatigue, +10% HP" },
    { name: "Stimpak", effect: "-2 Injury, +20% HP (Addictive)" },
    { name: "Rad-Away", effect: "-2 Rads, +20% HP (Addictive)" },
    { name: "Addictol", effect: "Removes addictions, +10% HP" }
  ];

  const chemTable = [
    { name: "Jet", effect: "Next turn take 2 turns with +1 speed & all rolls (Addictive)" },
    { name: "Psycho", effect: "+1 damage for 1 day (Addictive)" },
    { name: "Rocket", effect: "+1 movement distance for 1 day (Addictive)" },
    { name: "Mentats", effect: "+1 INT, +1 AGI for 1 day (Addictive)" },
    { name: "Buffout", effect: "+1 STR, +1 END for 1 day (Addictive)" },
    { name: "Beer", effect: "+1 CHA for 1 day, -1 thirst (Addictive)" }
  ];

  // Roll meds
  const medCount = rollDie(6) + 1;
  const med = medTable[Math.floor(Math.random() * medTable.length)];

  // Roll chems
  const chemCount = rollDie(6) + 1;
  const chem = chemTable[Math.floor(Math.random() * chemTable.length)];

  const output = `
    <b>Meds Found</b><br>
    ${med.name} x${medCount}<br>
    <i>${med.effect}</i><br><br>

    <b>Chems Found</b><br>
    ${chem.name} x${chemCount}<br>
    <i>${chem.effect}</i>
  `;

  document.getElementById("medOutput").innerHTML = output;
}
const ammoTable = [
  { type: "Small rounds", roll: "1d6+4", cost: 5 },
  { type: "E-cell", roll: "1d6+3", cost: 10 },
  { type: "Grenades", roll: "1d6", cost: 0 },
  { type: "Fuel", roll: "1d6", cost: 20 },
  { type: "Large rounds", roll: "1d6+2", cost: 10 },
  { type: "MF-cell", roll: "1d6+1", cost: 15 }
];
const grenadeTable = [
  { max: 6,  name: "Scrap Grenade", dmg: "11 X splash", cost: "15c" },
  { max: 8,  name: "Bottlecap Grenade", dmg: "12 X splash", cost: "20c" },
  { max: 10, name: "Frag Grenade", dmg: "13 X splash", cost: "25c" },
  { max: 12, name: "Plasma Grenade", dmg: "14 X splash", cost: "30c" },
  { max: 14, name: "Nuka Grenade", dmg: "15 X splash", cost: "35c" },
  { max: Infinity, name: "Mini Nuke", dmg: "16 X splash", cost: "40c" }
];
function rollGrenadeByLevel(level) {
  const roll = rollDie(6) + level;
  return grenadeTable.find(g => roll <= g.max);
}

// Simple dice roller helper
function rollDice(diceStr) {
  const match = diceStr.match(/(\d*)d(\d+)([+-]\d+)?/i);
  if (!match) return 0;
  const count = parseInt(match[1]) || 1;
  const sides = parseInt(match[2]);
  const modifier = parseInt(match[3]) || 0;
  let total = 0;
  for (let i = 0; i < count; i++) total += Math.floor(Math.random() * sides) + 1;
  return total + modifier;
}

function generateAmmo() {
  const selected = ammoTable[Math.floor(Math.random() * ammoTable.length)];
  const quantity = rollDice(selected.roll);
  const level = parseInt(document.getElementById("partyLevel").value) || 0;

  // Special grenade handling
  if (selected.type === "Grenades") {
    const grenade = rollGrenadeByLevel(level);
    document.getElementById("ammoOutput").innerHTML =
      `${quantity} x ${grenade.name}<br>` +
      `${grenade.dmg}, thrown, STR, ${grenade.cost}`;
    return;
  }
  // Normal ammo output
  const costText = selected.cost > 0 ? `${selected.cost}c each` : "";
  document.getElementById("ammoOutput").innerHTML =
    `${quantity} x ${selected.type} ${costText}`;
}
	
</script>
</body>
</html>




















































